{"version":3,"sources":["js/main.js","index.js"],"names":["LIMIT","page","isLoading","readyCount","ready","list","document","querySelector","loading","errorMessage","init","getPhotos","data","fetch","json","forEach","item","createListItem","error","message","classList","add","imageReady","toggleShowLoading","toggle","li","createElement","a","img","setAttribute","download_url","addEventListener","appendChild","url","author","window","clientHeight","scrollHeight","scrollTop","documentElement"],"mappings":";;;AAAA,MAAMA,EAAQ,EACd,IAAIC,EAAO,EACPC,GAAY,EACZC,EAAa,EACbC,GAAQ,EAEZ,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAeH,SAASC,cAAc,kBAEtCG,EAAO,KACTC,KAGEA,EAAY,UACV,IACAT,GAAY,EACZC,EAAa,EAEPS,MAAAA,QAAaC,4CAA4CZ,oBAC1CW,EAAKE,QAEnBC,QAASC,IACZC,EAAeD,KAGnBf,IACF,MAAOiB,GACgB,oBAAlBA,EAAMC,SACLV,EAAaW,UAAUC,IAAI,UAKjCC,EAAa,OACfnB,GAEiB,GACbK,EAAQY,UAAUC,IAAI,QAtChB,IAwCPlB,IACCK,EAAQY,UAAUC,IAAI,UACtBnB,GAAY,IAIdqB,EAAoB,KACtBf,EAAQY,UAAUI,OAAO,SAIvBP,EAAkBL,IACda,MAAAA,EAAKnB,SAASoB,cAAc,MAC5BC,EAAIrB,SAASoB,cAAc,KAC3BE,EAAMtB,SAASoB,cAAc,OAEnCE,EAAIC,aAAa,MAAOjB,EAAKkB,cAC7BF,EAAIC,aAAa,MAAO,+BACxBD,EAAIG,iBAAiB,OAAQT,GAE7BK,EAAEK,YAAYJ,GAEdD,EAAEE,aAAa,OAAQjB,EAAKqB,KAC5BN,EAAEE,aAAa,SAAU,UAEzBJ,EAAGO,YAAYL,GACfF,EAAGI,aAAa,QAAS,aACzBJ,EAAGI,aAAa,oBAAqBjB,EAAKsB,UAE1C7B,EAAK2B,YAAYP,IAGrBU,OAAOJ,iBAAiB,SAAU,KACxB,MAAA,aAAEK,EAAF,aAAgBC,EAAhB,UAA+BC,GAAchC,SAASiC,gBAEzDD,EAAYF,GAAiBC,EAAe,MAASnC,IACpDS,IA7BJH,EAAQY,UAAUI,OAAO,WApCzBb;;ACVJ,aADA,QAAA,qBACA,QAAA","file":"src.4a7803c1.js","sourceRoot":"..\\src","sourcesContent":["const LIMIT = 5\r\nlet page = 1\r\nlet isLoading = false\r\nlet readyCount = 0\r\nlet ready = true\r\n\r\nconst list = document.querySelector('.list')\r\nconst loading = document.querySelector('.loading')\r\nconst errorMessage = document.querySelector('.error-message')\r\n\r\nconst init = () => {\r\n    getPhotos()\r\n}\r\n\r\nconst getPhotos = async () => {\r\n    try {\r\n        isLoading = true\r\n        readyCount = 0;\r\n\r\n        const data = await fetch(`https://picsum.photos/v2/list?page=${page}&limit=${LIMIT}`)\r\n        const photos = await data.json();\r\n    \r\n        photos.forEach((item) => {\r\n            createListItem(item)\r\n        })\r\n\r\n        page++    \r\n    } catch (error) {\r\n        if(error.message === 'Failed to fetch') {\r\n            errorMessage.classList.add('show')\r\n        }\r\n    }\r\n}\r\n\r\nconst imageReady = () => {\r\n    readyCount++;\r\n\r\n    if(readyCount >= 1) \r\n        loading.classList.add('hide');\r\n\r\n    if(readyCount === LIMIT) {\r\n        loading.classList.add('bottom');\r\n        isLoading = false;\r\n    }\r\n}\r\n\r\nconst toggleShowLoading = () => {\r\n    loading.classList.toggle('hide')\r\n}\r\n\r\n\r\nconst createListItem = (data) => {\r\n    const li = document.createElement('li')\r\n    const a = document.createElement('a')\r\n    const img = document.createElement('img')\r\n\r\n    img.setAttribute('src', data.download_url)\r\n    img.setAttribute('alt', 'A random image from ipicsum')\r\n    img.addEventListener('load', imageReady)\r\n\r\n    a.appendChild(img)\r\n\r\n    a.setAttribute('href', data.url)\r\n    a.setAttribute('target', '_blank')\r\n\r\n    li.appendChild(a)\r\n    li.setAttribute('class', 'list-item')\r\n    li.setAttribute('title', `Photo by ${data.author}`)\r\n\r\n    list.appendChild(li)\r\n}\r\n\r\nwindow.addEventListener('scroll', () => {\r\n    const { clientHeight, scrollHeight , scrollTop } = document.documentElement;\r\n    \r\n    if(scrollTop + clientHeight >= (scrollHeight - 100) && !isLoading) {\r\n        getPhotos()\r\n        toggleShowLoading()\r\n    }\r\n})\r\n\r\ninit()","import './scss/style.scss';\r\nimport './js/main';"]}